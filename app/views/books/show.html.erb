<%= stylesheet_link_tag 'books', :media => "all" %>
<!DOCTYPE html>

<br>
<br>
<br>
<div class="mx-4">

<h1>詳細</h1>
<br>

<div class="container-fluid">
    <div class="row">
        <div class="col-sm">
            <div class="imgframe">
                <div class="text-center">
                    <% if @book.image.present? %>
                        <%= image_tag @book.image_url, width: '80%', height: '80%'%>
                    <% else %>
                        <%= image_tag 'no_image.jpg', width: '80%', height: '80%'%>
                    <% end %>
                </div>
            </div>
            <br>
            <br>
            <br>
        </div>

        <div class="col-sm-8">
            <p>
                <strong>タイトル:</strong>
                <%= @book.title %>
            </p>

            <p>
                <strong>著者:</strong>
                <%= @book.author %>
            </p>

            <p>
                <strong >出版社:</strong>
                <%= @book.publisher %>
            </p>

            <p>
                <strong>発行年:</strong>
                <%= @book.year %>
            </p>

            <p>
                <strong>Isbnコード:</strong>
                <%= @book.isbn %>
            </p>


            <p>
                <details>
                <summary>目次</summary>
                
                <%= simple_format(@book.content) %>
                </details>
            </p>

            <div class="comment-wrapper">
                <details>
                    <summary>コメント一覧</summary>
                    <% @comments.each do |c| %>
                    <div>
                        <%= c.user.email unless c.user.blank? %>
                        <br>
                        %= c.content %>
                    </div>
                        <br>
                    <% end %>

                    <% if user_signed_in? %>

                    <%= form_with(model: [@book, @comment], local: true) do |f| %>
                        <%= f.text_area :content %>
                        <%= button_tag type: "submit" do %>
                        <i class="far fa-comments"></i> コメントする
                        <% end %>
                    <% end %>
                    <% end %>
                </details>
            </div>

            <br>

            <h6>Web検索</h6>

            <script async src="https://cse.google.com/cse.js?cx=55c08b61a93d84f1a">
            </script>
            <div class="gcse-search"></div>
            <br>
            <br>

            
<%
=begin
%>
            <p>
            <%= link_to 'タイトル', "https://www.google.com/search?q=#{@book.title}+#{@book.author}" ,class:'btn btn-outline-primary'%><br>
            </p>

            <p>
            <%= link_to '著者', "https://www.google.com/search?q=#{@book.author}" ,class:'btn btn-outline-primary'%><br>
            </p>

            <p>
            <%= link_to '出版社', "https://www.google.com/search?q=#{@book.publisher}" ,class:'btn btn-outline-primary'%><br>
            </p>

            <p>
            <%= link_to '発行年', "https://www.google.com/search?q=#{@book.year}" ,class:'btn btn-outline-primary'%><br>
            </p>

            <p>
            <%= link_to 'Isbnコード', "https://www.google.com/search?q=#{@book.isbn}" ,class:'btn btn-outline-primary'%><br>
            </p>
            

            <HTML>
            <HEAD>
            <SCRIPT LANGUAGE="JavaScript">
            function jump(){
                var flag = 0;
                for(i=0; i<document.forms[0].url.length; i++){
                    if(document.forms[0].url[i].checked){
                        flag = 1;
                        window.location.href = document.forms[0].url[i].value;
                    }
                }
                if(flag == 0){
                    alert('ラジオボタンが選択されていません。');
                }
            }
            </SCRIPT>
            </HEAD>
            <BODY>
            <FORM>
            <INPUT TYPE="radio" NAME="url" VALUE="https://www.google.com/search?q=#{@book.title}">タイトル
            <INPUT TYPE="radio" NAME="url" VALUE="http://www.2.com/">
            <INPUT TYPE="radio" NAME="url" VALUE="http://www.3.com/">
            <INPUT TYPE="button" onClick="jump();" VALUE="検索">
            </FORM>
            </BODY>
            </HTML>

<%
=end
%>

</div>
</div>
